<!DOCTYPE html> <!--recognizes file type as HTML-->

<html lang="en"> <!--sets language to english-->

<head>
    <meta charset="UTF-8" /> <!--tells web browser to interpret doc using UTF-8 encoding-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!--allows for mobile compatibility-->
    <title>PSA RSVP Form</title> <!--Title shown in browser tab-->
    <script src="https://cdn.tailwindcss.com"></script> <!--loads tailwind for styling-->
    <!--Fade in animation-->
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
    </style>
</head>

<body class="bg-blue-400 flex items-center justify-center min-h-screen p-6">

    <div class="bg-white rounded-lg shadow-xl p-8 max-w-lg w-full text-center animate-fade-in">
        <p id="title" class="text-3xl font-bold text-black mb-4"></p>
        <p id="timer" class="text-lg text-gray-700 font-semibold hidden">Loading...</p>
        <p id="countdown" class="text-xl text-gray-700"></p>
    </div>

    <script>
        title.innerText = "⏳ Form Will Open In ⏳"

        // set open time

        const open = new Date();
        const timer = document.getElementById("timer");
        const countdown = document.getElementById("countdown");
        localStorage.setItem("formUnlocked", "false");

        open.setFullYear(2025, 6, 16); // 0-indexed (0 = Jan)
        open.setHours(14); // 24 hr 
        open.setMinutes(44); // 60 min
        open.setSeconds(0);

        if (localStorage.getItem("formUnlocked") === "true") {
            window.location.href = "home.html";
        }

        const interval = setInterval(() => {
            const now = new Date();
            const timeLeft = open - now;

            if (timeLeft <= 0) {
                clearInterval(interval);
                countdown.innerText = "Redirecting...";
                title.innerText = "Form Opened"
                localStorage.setItem("formUnlocked", "true"); // save state for post timer finish
                window.location.href = "home.html";  // redirect when time is reached
                return;
            }

            // define days, hours, minutes, seconds

            const days = Math.floor(timeLeft / (1000 * 60 *60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const mins = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((timeLeft % (1000 * 60)) / 1000);

            countdown.innerHTML = `${days}d ${hours}h ${mins}m ${secs}s`; // timer text + update
        }, 1000);

    </script>

</body>
</html>